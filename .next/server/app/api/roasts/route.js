"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/roasts/route";
exports.ids = ["app/api/roasts/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "async_hooks":
/*!******************************!*\
  !*** external "async_hooks" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("async_hooks");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froasts%2Froute&page=%2Fapi%2Froasts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froasts%2Froute.ts&appDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froasts%2Froute&page=%2Fapi%2Froasts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froasts%2Froute.ts&appDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_gobi_Downloads_bw_log_viewer_next_app_api_roasts_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/roasts/route.ts */ \"(rsc)/./app/api/roasts/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/roasts/route\",\n        pathname: \"/api/roasts\",\n        filename: \"route\",\n        bundlePath: \"app/api/roasts/route\"\n    },\n    resolvedPagePath: \"/Users/gobi/Downloads/bw-log-viewer-next/app/api/roasts/route.ts\",\n    nextConfigOutput,\n    userland: _Users_gobi_Downloads_bw_log_viewer_next_app_api_roasts_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/roasts/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyb2FzdHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJvYXN0cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJvYXN0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmdvYmklMkZEb3dubG9hZHMlMkZidy1sb2ctdmlld2VyLW5leHQlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZ29iaSUyRkRvd25sb2FkcyUyRmJ3LWxvZy12aWV3ZXItbmV4dCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0I7QUFDN0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idy1sb2ctdmlld2VyLW5leHQvPzFjYTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2dvYmkvRG93bmxvYWRzL2J3LWxvZy12aWV3ZXItbmV4dC9hcHAvYXBpL3JvYXN0cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcm9hc3RzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcm9hc3RzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yb2FzdHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvZ29iaS9Eb3dubG9hZHMvYnctbG9nLXZpZXdlci1uZXh0L2FwcC9hcGkvcm9hc3RzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9yb2FzdHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froasts%2Froute&page=%2Fapi%2Froasts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froasts%2Froute.ts&appDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/roasts/route.ts":
/*!*********************************!*\
  !*** ./app/api/roasts/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_getRoasts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/getRoasts */ \"(rsc)/./lib/getRoasts.ts\");\n// app/api/roasts/route.ts\n\n\nconst runtime = \"nodejs\";\nasync function GET(req) {\n    try {\n        const url = req.nextUrl;\n        const serial = url.searchParams.get(\"serial\") || \"\";\n        const from = url.searchParams.get(\"from\") || undefined;\n        const to = url.searchParams.get(\"to\") || undefined;\n        const page = Number(url.searchParams.get(\"page\") || \"1\") || 1;\n        const pageSize = Number(url.searchParams.get(\"pageSize\") || \"10\") || 10;\n        const result = await (0,_lib_getRoasts__WEBPACK_IMPORTED_MODULE_1__.getRoasts)(serial, from, to, page, pageSize);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (err) {\n        console.error(\"Error loading roasts\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: err?.message || \"Failed to load roasts\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3JvYXN0cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsMEJBQTBCO0FBQzhCO0FBQ0w7QUFFNUMsTUFBTUUsVUFBVSxTQUFTO0FBRXpCLGVBQWVDLElBQUlDLEdBQWdCO0lBQ3hDLElBQUk7UUFDRixNQUFNQyxNQUFNRCxJQUFJRSxPQUFPO1FBQ3ZCLE1BQU1DLFNBQVNGLElBQUlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDLGFBQWE7UUFDakQsTUFBTUMsT0FBT0wsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUMsV0FBV0U7UUFDN0MsTUFBTUMsS0FBS1AsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUMsU0FBU0U7UUFFekMsTUFBTUUsT0FBT0MsT0FBT1QsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUMsV0FBVyxRQUFRO1FBQzVELE1BQU1NLFdBQVdELE9BQU9ULElBQUlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsU0FBUztRQUVyRSxNQUFNTyxTQUFTLE1BQU1mLHlEQUFTQSxDQUFDTSxRQUFRRyxNQUFNRSxJQUFJQyxNQUFNRTtRQUV2RCxPQUFPZixxREFBWUEsQ0FBQ2lCLElBQUksQ0FBQ0Q7SUFDM0IsRUFBRSxPQUFPRSxLQUFVO1FBQ2pCQyxRQUFRQyxLQUFLLENBQUMsd0JBQXdCRjtRQUN0QyxPQUFPbEIscURBQVlBLENBQUNpQixJQUFJLENBQ3RCO1lBQUVHLE9BQU9GLEtBQUtHLFdBQVc7UUFBd0IsR0FDakQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idy1sb2ctdmlld2VyLW5leHQvLi9hcHAvYXBpL3JvYXN0cy9yb3V0ZS50cz9lZTYyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcC9hcGkvcm9hc3RzL3JvdXRlLnRzXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRSb2FzdHMgfSBmcm9tIFwiLi4vLi4vLi4vbGliL2dldFJvYXN0c1wiO1xuXG5leHBvcnQgY29uc3QgcnVudGltZSA9IFwibm9kZWpzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IHJlcS5uZXh0VXJsO1xuICAgIGNvbnN0IHNlcmlhbCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwic2VyaWFsXCIpIHx8IFwiXCI7XG4gICAgY29uc3QgZnJvbSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiZnJvbVwiKSB8fCB1bmRlZmluZWQ7XG4gICAgY29uc3QgdG8gPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcInRvXCIpIHx8IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IHBhZ2UgPSBOdW1iZXIodXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJwYWdlXCIpIHx8IFwiMVwiKSB8fCAxO1xuICAgIGNvbnN0IHBhZ2VTaXplID0gTnVtYmVyKHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicGFnZVNpemVcIikgfHwgXCIxMFwiKSB8fCAxMDtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJvYXN0cyhzZXJpYWwsIGZyb20sIHRvLCBwYWdlLCBwYWdlU2l6ZSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0KTtcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyByb2FzdHNcIiwgZXJyKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBlcnI/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCByb2FzdHNcIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFJvYXN0cyIsInJ1bnRpbWUiLCJHRVQiLCJyZXEiLCJ1cmwiLCJuZXh0VXJsIiwic2VyaWFsIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiZnJvbSIsInVuZGVmaW5lZCIsInRvIiwicGFnZSIsIk51bWJlciIsInBhZ2VTaXplIiwicmVzdWx0IiwianNvbiIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/roasts/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/getRoastIds.ts":
/*!****************************!*\
  !*** ./lib/getRoastIds.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRoastIds: () => (/* binding */ getRoastIds)\n/* harmony export */ });\n/* harmony import */ var _logging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logging */ \"(rsc)/./lib/logging.ts\");\n// lib/getRoastIds.ts\n\n// UUID extractor (simple, robust)\nfunction extractUuid(text) {\n    const uuidRegex = /[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/;\n    const match = text.match(uuidRegex);\n    return match ? match[0] : null;\n}\n// Required because GCP timestamps may include nanos\nfunction normalizeTimestamp(ts) {\n    if (!ts) return null;\n    if (typeof ts === \"string\") {\n        const fixed = ts.replace(/\\.(\\d{3})\\d+Z$/, \".$1Z\");\n        const d = new Date(fixed);\n        return isNaN(d.getTime()) ? null : d.toISOString();\n    }\n    if (ts instanceof Date) return ts.toISOString();\n    if (typeof ts === \"object\") {\n        const seconds = Number(ts.seconds ?? ts._seconds ?? ts.value?.seconds ?? 0);\n        const nanos = Number(ts.nanos ?? ts._nanos ?? ts.value?.nanos ?? 0);\n        if (!Number.isFinite(seconds)) return null;\n        return new Date(seconds * 1000 + Math.floor(nanos / 1e6)).toISOString();\n    }\n    return null;\n}\nfunction extractMessage(entry) {\n    if (!entry) return \"\";\n    if (entry.textPayload) return String(entry.textPayload);\n    if (entry.data) return String(entry.data);\n    const jp = entry.jsonPayload;\n    if (jp) {\n        if (typeof jp === \"string\") return jp;\n        if (typeof jp.message === \"string\") return jp.message;\n        try {\n            return JSON.stringify(jp);\n        } catch  {\n        // fall through\n        }\n    }\n    return \"\";\n}\nfunction classifyEvent(text) {\n    const lower = text.toLowerCase();\n    if (lower.includes(\"end of roast id\")) return \"end\";\n    if (lower.includes(\"roast id received\")) return \"start\";\n    if (lower.includes(\"srid\")) return \"start\";\n    return \"unknown\";\n}\nasync function getRoastIds(serial, fromIso, toIso) {\n    console.log(\"\\uD83D\\uDD25 ROAST ID SEARCH WINDOW:\", fromIso, \"â†’\", toIso);\n    // EXACT terminal-equivalent filter\n    const filter = `\nlogName=\"projects/bw-core/logs/roaster\"\nlabels.serial=\"${serial}\"\ntimestamp >= \"${fromIso}\"\ntimestamp < \"${toIso}\"\n(\n  textPayload:\"Roast ID Received\" OR\n  textPayload:\"End of Roast ID\" OR\n  textPayload:\"SRID\" OR\n  jsonPayload.message:\"Roast ID Received\" OR\n  jsonPayload.message:\"End of Roast ID\" OR\n  jsonPayload.message:\"SRID\"\n)\n`.trim();\n    // Fetch logs\n    const [entries] = await _logging__WEBPACK_IMPORTED_MODULE_0__.logging.getEntries({\n        filter,\n        pageSize: 3000,\n        orderBy: \"timestamp asc\"\n    });\n    console.log(\"\\uD83D\\uDD25 Raw Roast Log Count:\", entries.length);\n    if (entries.length > 0) {\n        const sample = entries[0];\n        console.log(\"\\uD83D\\uDD25 Sample entry keys:\", Object.keys(sample));\n        try {\n            console.log(\"\\uD83D\\uDD25 Sample entry data:\", JSON.stringify(sample.data || sample.textPayload || sample, null, 2).slice(0, 800));\n        } catch  {\n        // ignore\n        }\n    }\n    const results = [];\n    for (const entry of entries){\n        const e = entry;\n        const text = extractMessage(e);\n        if (!text) continue;\n        const roastId = extractUuid(text);\n        if (!roastId) continue;\n        const ts = normalizeTimestamp(e.timestamp || e.metadata?.timestamp);\n        if (!ts) continue;\n        const eventType = classifyEvent(text);\n        results.push({\n            roastId,\n            timestamp: ts,\n            raw: text.trim(),\n            eventType\n        });\n    }\n    console.log(\"\\uD83D\\uDD25 Extracted Roast IDss:\", results.length);\n    return results;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUNGO1FBQ2pELElBQUk7WUFDRlQsUUFBUUMsR0FBRyxDQUFDLG1DQUF5QlgsS0FBS0MsU0FBUyxDQUFDa0IsT0FBT3ZCLElBQUksSUFBSXVCLE9BQU96QixXQUFXLElBQUl5QixRQUFRLE1BQU0sR0FBR0csS0FBSyxDQUFDLEdBQUc7UUFDckgsRUFBRSxPQUFNO1FBQ04sU0FBUztRQUNYO0lBQ0Y7SUFFQSxNQUFNQyxVQUE2QixFQUFFO0lBRXJDLEtBQUssTUFBTTlCLFNBQVNxQixRQUFTO1FBQzNCLE1BQU1VLElBQVMvQjtRQUVmLE1BQU10QixPQUFlcUIsZUFBZWdDO1FBQ3BDLElBQUksQ0FBQ3JELE1BQU07UUFFWCxNQUFNc0QsVUFBVXZELFlBQVlDO1FBQzVCLElBQUksQ0FBQ3NELFNBQVM7UUFDZCxNQUFNbEQsS0FBS0QsbUJBQW1Ca0QsRUFBRUUsU0FBUyxJQUFJRixFQUFFRyxRQUFRLEVBQUVEO1FBQ3pELElBQUksQ0FBQ25ELElBQUk7UUFDVCxNQUFNcUQsWUFBWTFCLGNBQWMvQjtRQUVoQ29ELFFBQVFNLElBQUksQ0FBQztZQUNYSjtZQUNBQyxXQUFXbkQ7WUFDWHVELEtBQUszRCxLQUFLMEMsSUFBSTtZQUNkZTtRQUNGO0lBQ0Y7SUFFQWxCLFFBQVFDLEdBQUcsQ0FBQyxzQ0FBNEJZLFFBQVFMLE1BQU07SUFDdEQsT0FBT0s7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2J3LWxvZy12aWV3ZXItbmV4dC8uL2xpYi9nZXRSb2FzdElkcy50cz9lMjNjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9nZXRSb2FzdElkcy50c1xuaW1wb3J0IHsgbG9nZ2luZyB9IGZyb20gXCIuL2xvZ2dpbmdcIjtcblxuZXhwb3J0IGludGVyZmFjZSBSb2FzdFN0YXJ0RXZlbnQge1xuICByb2FzdElkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICByYXc6IHN0cmluZztcbiAgZXZlbnRUeXBlOiBcInN0YXJ0XCIgfCBcImVuZFwiIHwgXCJ1bmtub3duXCI7XG59XG5cbi8vIFVVSUQgZXh0cmFjdG9yIChzaW1wbGUsIHJvYnVzdClcbmZ1bmN0aW9uIGV4dHJhY3RVdWlkKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCB1dWlkUmVnZXggPVxuICAgIC9bMC05YS1mQS1GXXs4fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXsxMn0vO1xuXG4gIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCh1dWlkUmVnZXgpO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXSA6IG51bGw7XG59XG5cbi8vIFJlcXVpcmVkIGJlY2F1c2UgR0NQIHRpbWVzdGFtcHMgbWF5IGluY2x1ZGUgbmFub3NcbmZ1bmN0aW9uIG5vcm1hbGl6ZVRpbWVzdGFtcCh0czogYW55KTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghdHMpIHJldHVybiBudWxsO1xuXG4gIGlmICh0eXBlb2YgdHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBmaXhlZCA9IHRzLnJlcGxhY2UoL1xcLihcXGR7M30pXFxkK1okLywgXCIuJDFaXCIpO1xuICAgIGNvbnN0IGQgPSBuZXcgRGF0ZShmaXhlZCk7XG4gICAgcmV0dXJuIGlzTmFOKGQuZ2V0VGltZSgpKSA/IG51bGwgOiBkLnRvSVNPU3RyaW5nKCk7XG4gIH1cblxuICBpZiAodHMgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gdHMudG9JU09TdHJpbmcoKTtcblxuICBpZiAodHlwZW9mIHRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcih0cy5zZWNvbmRzID8/IHRzLl9zZWNvbmRzID8/IHRzLnZhbHVlPy5zZWNvbmRzID8/IDApO1xuICAgIGNvbnN0IG5hbm9zID0gTnVtYmVyKHRzLm5hbm9zID8/IHRzLl9uYW5vcyA/PyB0cy52YWx1ZT8ubmFub3MgPz8gMCk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc2Vjb25kcykpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBuZXcgRGF0ZShzZWNvbmRzICogMTAwMCArIE1hdGguZmxvb3IobmFub3MgLyAxZTYpKS50b0lTT1N0cmluZygpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RNZXNzYWdlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIWVudHJ5KSByZXR1cm4gXCJcIjtcbiAgaWYgKGVudHJ5LnRleHRQYXlsb2FkKSByZXR1cm4gU3RyaW5nKGVudHJ5LnRleHRQYXlsb2FkKTtcbiAgaWYgKGVudHJ5LmRhdGEpIHJldHVybiBTdHJpbmcoZW50cnkuZGF0YSk7XG5cbiAgY29uc3QganAgPSBlbnRyeS5qc29uUGF5bG9hZDtcbiAgaWYgKGpwKSB7XG4gICAgaWYgKHR5cGVvZiBqcCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGpwO1xuICAgIGlmICh0eXBlb2YganAubWVzc2FnZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGpwLm1lc3NhZ2U7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShqcCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBmYWxsIHRocm91Z2hcbiAgICB9XG4gIH1cblxuICByZXR1cm4gXCJcIjtcbn1cblxuZnVuY3Rpb24gY2xhc3NpZnlFdmVudCh0ZXh0OiBzdHJpbmcpOiBcInN0YXJ0XCIgfCBcImVuZFwiIHwgXCJ1bmtub3duXCIge1xuICBjb25zdCBsb3dlciA9IHRleHQudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGxvd2VyLmluY2x1ZGVzKFwiZW5kIG9mIHJvYXN0IGlkXCIpKSByZXR1cm4gXCJlbmRcIjtcbiAgaWYgKGxvd2VyLmluY2x1ZGVzKFwicm9hc3QgaWQgcmVjZWl2ZWRcIikpIHJldHVybiBcInN0YXJ0XCI7XG4gIGlmIChsb3dlci5pbmNsdWRlcyhcInNyaWRcIikpIHJldHVybiBcInN0YXJ0XCI7XG4gIHJldHVybiBcInVua25vd25cIjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJvYXN0SWRzKFxuICBzZXJpYWw6IHN0cmluZyxcbiAgZnJvbUlzbzogc3RyaW5nLFxuICB0b0lzbzogc3RyaW5nXG4pIHtcbiAgY29uc29sZS5sb2coXCLwn5SlIFJPQVNUIElEIFNFQVJDSCBXSU5ET1c6XCIsIGZyb21Jc28sIFwi4oaSXCIsIHRvSXNvKTtcblxuICAvLyBFWEFDVCB0ZXJtaW5hbC1lcXVpdmFsZW50IGZpbHRlclxuICBjb25zdCBmaWx0ZXIgPSBgXG5sb2dOYW1lPVwicHJvamVjdHMvYnctY29yZS9sb2dzL3JvYXN0ZXJcIlxubGFiZWxzLnNlcmlhbD1cIiR7c2VyaWFsfVwiXG50aW1lc3RhbXAgPj0gXCIke2Zyb21Jc299XCJcbnRpbWVzdGFtcCA8IFwiJHt0b0lzb31cIlxuKFxuICB0ZXh0UGF5bG9hZDpcIlJvYXN0IElEIFJlY2VpdmVkXCIgT1JcbiAgdGV4dFBheWxvYWQ6XCJFbmQgb2YgUm9hc3QgSURcIiBPUlxuICB0ZXh0UGF5bG9hZDpcIlNSSURcIiBPUlxuICBqc29uUGF5bG9hZC5tZXNzYWdlOlwiUm9hc3QgSUQgUmVjZWl2ZWRcIiBPUlxuICBqc29uUGF5bG9hZC5tZXNzYWdlOlwiRW5kIG9mIFJvYXN0IElEXCIgT1JcbiAganNvblBheWxvYWQubWVzc2FnZTpcIlNSSURcIlxuKVxuYC50cmltKCk7XG5cbiAgLy8gRmV0Y2ggbG9nc1xuICBjb25zdCBbZW50cmllc10gPSBhd2FpdCBsb2dnaW5nLmdldEVudHJpZXMoe1xuICAgIGZpbHRlcixcbiAgICBwYWdlU2l6ZTogMzAwMCxcbiAgICBvcmRlckJ5OiBcInRpbWVzdGFtcCBhc2NcIixcbiAgfSk7XG5cbiAgY29uc29sZS5sb2coXCLwn5SlIFJhdyBSb2FzdCBMb2cgQ291bnQ6XCIsIGVudHJpZXMubGVuZ3RoKTtcbiAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHNhbXBsZTogYW55ID0gZW50cmllc1swXTtcbiAgICBjb25zb2xlLmxvZyhcIvCflKUgU2FtcGxlIGVudHJ5IGtleXM6XCIsIE9iamVjdC5rZXlzKHNhbXBsZSkpO1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCflKUgU2FtcGxlIGVudHJ5IGRhdGE6XCIsIEpTT04uc3RyaW5naWZ5KHNhbXBsZS5kYXRhIHx8IHNhbXBsZS50ZXh0UGF5bG9hZCB8fCBzYW1wbGUsIG51bGwsIDIpLnNsaWNlKDAsIDgwMCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gaWdub3JlXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVzdWx0czogUm9hc3RTdGFydEV2ZW50W10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBlOiBhbnkgPSBlbnRyeTtcblxuICAgIGNvbnN0IHRleHQ6IHN0cmluZyA9IGV4dHJhY3RNZXNzYWdlKGUpO1xuICAgIGlmICghdGV4dCkgY29udGludWU7XG5cbiAgICBjb25zdCByb2FzdElkID0gZXh0cmFjdFV1aWQodGV4dCk7XG4gICAgaWYgKCFyb2FzdElkKSBjb250aW51ZTtcbiAgICBjb25zdCB0cyA9IG5vcm1hbGl6ZVRpbWVzdGFtcChlLnRpbWVzdGFtcCB8fCBlLm1ldGFkYXRhPy50aW1lc3RhbXApO1xuICAgIGlmICghdHMpIGNvbnRpbnVlO1xuICAgIGNvbnN0IGV2ZW50VHlwZSA9IGNsYXNzaWZ5RXZlbnQodGV4dCk7XG5cbiAgICByZXN1bHRzLnB1c2goe1xuICAgICAgcm9hc3RJZCxcbiAgICAgIHRpbWVzdGFtcDogdHMsXG4gICAgICByYXc6IHRleHQudHJpbSgpLFxuICAgICAgZXZlbnRUeXBlLFxuICAgIH0pO1xuICB9XG5cbiAgY29uc29sZS5sb2coXCLwn5SlIEV4dHJhY3RlZCBSb2FzdCBJRHNzOlwiLCByZXN1bHRzLmxlbmd0aCk7XG4gIHJldHVybiByZXN1bHRzO1xufVxuIl0sIm5hbWVzIjpbImxvZ2dpbmciLCJleHRyYWN0VXVpZCIsInRleHQiLCJ1dWlkUmVnZXgiLCJtYXRjaCIsIm5vcm1hbGl6ZVRpbWVzdGFtcCIsInRzIiwiZml4ZWQiLCJyZXBsYWNlIiwiZCIsIkRhdGUiLCJpc05hTiIsImdldFRpbWUiLCJ0b0lTT1N0cmluZyIsInNlY29uZHMiLCJOdW1iZXIiLCJfc2Vjb25kcyIsInZhbHVlIiwibmFub3MiLCJfbmFub3MiLCJpc0Zpbml0ZSIsIk1hdGgiLCJmbG9vciIsImV4dHJhY3RNZXNzYWdlIiwiZW50cnkiLCJ0ZXh0UGF5bG9hZCIsIlN0cmluZyIsImRhdGEiLCJqcCIsImpzb25QYXlsb2FkIiwibWVzc2FnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbGFzc2lmeUV2ZW50IiwibG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZ2V0Um9hc3RJZHMiLCJzZXJpYWwiLCJmcm9tSXNvIiwidG9Jc28iLCJjb25zb2xlIiwibG9nIiwiZmlsdGVyIiwidHJpbSIsImVudHJpZXMiLCJnZXRFbnRyaWVzIiwicGFnZVNpemUiLCJvcmRlckJ5IiwibGVuZ3RoIiwic2FtcGxlIiwiT2JqZWN0Iiwia2V5cyIsInNsaWNlIiwicmVzdWx0cyIsImUiLCJyb2FzdElkIiwidGltZXN0YW1wIiwibWV0YWRhdGEiLCJldmVudFR5cGUiLCJwdXNoIiwicmF3Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/getRoastIds.ts\n");

/***/ }),

/***/ "(rsc)/./lib/getRoasts.ts":
/*!**************************!*\
  !*** ./lib/getRoasts.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRoasts: () => (/* binding */ getRoasts)\n/* harmony export */ });\n/* harmony import */ var _getRoastIds__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getRoastIds */ \"(rsc)/./lib/getRoastIds.ts\");\n/* harmony import */ var _logging__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logging */ \"(rsc)/./lib/logging.ts\");\n// lib/getRoasts.ts\n\n\nfunction addMinutes(iso, minutes) {\n    const d = new Date(iso);\n    return new Date(d.getTime() + minutes * 60 * 1000).toISOString();\n}\nfunction addSeconds(iso, seconds) {\n    const d = new Date(iso);\n    return new Date(d.getTime() + seconds * 1000).toISOString();\n}\nfunction messageFromEntry(entry) {\n    if (!entry) return \"\";\n    if (entry.textPayload) return String(entry.textPayload);\n    if (entry.data) return String(entry.data);\n    const jp = entry.jsonPayload;\n    if (jp) {\n        if (typeof jp === \"string\") return jp;\n        if (typeof jp.message === \"string\") return jp.message;\n        try {\n            return JSON.stringify(jp);\n        } catch  {\n        // ignore\n        }\n    }\n    return \"\";\n}\nfunction normalizeTs(ts) {\n    if (!ts) return null;\n    if (typeof ts === \"string\") {\n        const fixed = ts.replace(/\\.(\\d{3})\\d+Z$/, \".$1Z\");\n        const d = new Date(fixed);\n        return isNaN(d.getTime()) ? null : d.toISOString();\n    }\n    if (ts instanceof Date) return ts.toISOString();\n    if (typeof ts === \"object\") {\n        const seconds = Number(ts.seconds ?? ts._seconds ?? ts.value?.seconds ?? 0);\n        const nanos = Number(ts.nanos ?? ts._nanos ?? ts.value?.nanos ?? 0);\n        if (!Number.isFinite(seconds)) return null;\n        return new Date(seconds * 1000 + Math.floor(nanos / 1e6)).toISOString();\n    }\n    return null;\n}\nfunction extractAlarmName(text) {\n    // ActiveAlarms JSON array\n    const activeMatch = text.match(/ActiveAlarms:\\s*(\\[[^\\]]+\\])/i);\n    if (activeMatch && activeMatch[1]) {\n        try {\n            const arr = JSON.parse(activeMatch[1]);\n            const names = [];\n            for (const item of arr){\n                if (item?.Name) names.push(String(item.Name));\n            }\n            if (names.length) return names.join(\", \");\n        } catch  {\n        // fall through\n        }\n    }\n    const alarmMatch = text.match(/ALARM[:\\s-]*([^,;\\n\\r]+)/i);\n    if (alarmMatch && alarmMatch[1]) {\n        return alarmMatch[1].trim();\n    }\n    const nameFieldMatch = text.match(/\"Name\"\\s*:\\s*\"([^\"]+)\"/i);\n    if (nameFieldMatch && nameFieldMatch[1]) return nameFieldMatch[1].trim();\n    const tagMatch = text.match(/Tag=([A-Za-z0-9_\\-]+)/);\n    if (tagMatch && tagMatch[1]) {\n        return tagMatch[1].trim();\n    }\n    if (/ActiveAlarms:\\s*\\[\\s*\\]/i.test(text)) return null;\n    return null;\n}\nfunction normalizeAlarmNames(raw) {\n    if (!raw) return [];\n    const matches = raw.match(/[A-Za-z][A-Za-z0-9_.-]{2,}/g) || [];\n    const reserved = new Set([\n        \"INFO\",\n        \"ALARM\",\n        \"ActiveAlarms\",\n        \"Verb\",\n        \"Level\",\n        \"Severity\",\n        \"DATA\",\n        \"set\",\n        \"setTag\",\n        \"Tag\"\n    ]);\n    const names = [];\n    for (const m of matches){\n        if (reserved.has(m)) continue;\n        if (/^x?[0-9a-fA-F]+$/.test(m)) continue; // hex-ish codes like x401\n        if (/^set/i.test(m)) continue;\n        if (m.toLowerCase().startsWith(\"s\")) {\n            // skip stray leading s / s_DATA tokens\n            if (m === \"s\" || m.startsWith(\"s_DATA\")) continue;\n        }\n        // normalize Main_Blower_RuntimeFail/MainBlowerRuntime_Fail variants to a single token\n        const normalized = m.replace(/Runtime_Fail/i, \"RuntimeFail\").replace(/_/g, \"_\");\n        names.push(normalized);\n    }\n    // Deduplicate while preserving order; prefer collapsing camel vs underscore duplicates\n    const seen = new Set();\n    const unique = [];\n    for (const n of names){\n        const key = n.replace(/_/g, \"\").toLowerCase();\n        if (seen.has(key)) continue;\n        seen.add(key);\n        unique.push(n);\n    }\n    return unique;\n}\nfunction parseCoolingDuration(text) {\n    // e.g., \"LOG Cool , 3:22\" or \"Cool , 3:22\"\n    const coolMatch = text.match(/Cool\\s*,\\s*(\\d+):(\\d{2})/i);\n    if (coolMatch) {\n        const minutes = Number(coolMatch[1]);\n        const seconds = Number(coolMatch[2]);\n        const total = minutes * 60 + seconds;\n        if (Number.isFinite(total)) return {\n            seconds: total,\n            label: `${minutes}:${coolMatch[2]}`\n        };\n    }\n    // e.g., \"Bean Cooler reached ... at 3:23, m:s\"\n    const reachedMatch = text.match(/reached[^0-9]*([0-9]+):([0-9]{2})/i);\n    if (reachedMatch) {\n        const minutes = Number(reachedMatch[1]);\n        const seconds = Number(reachedMatch[2]);\n        const total = minutes * 60 + seconds;\n        if (Number.isFinite(total)) return {\n            seconds: total,\n            label: `${minutes}:${reachedMatch[2]}`\n        };\n    }\n    return null;\n}\nasync function fetchCoolingInfo(serial, startIso, endIso) {\n    const filter = `\nlogName=\"projects/bw-core/logs/roaster\"\nlabels.serial=\"${serial}\"\ntimestamp >= \"${startIso}\"\ntimestamp <= \"${endIso}\"\n(textPayload:\"Cool\" OR textPayload:\"COOL\" OR textPayload:\"Bean Cooler reached\" OR jsonPayload.message:\"Cool\" OR jsonPayload.message:\"COOL\" OR jsonPayload.message:\"Bean Cooler reached\")\n`.trim();\n    const [entries] = await _logging__WEBPACK_IMPORTED_MODULE_1__.logging.getEntries({\n        filter,\n        orderBy: \"timestamp asc\",\n        pageSize: 1200\n    });\n    let coolingSeconds = null;\n    for (const entry of entries){\n        const ts = normalizeTs(entry.timestamp || entry.metadata?.timestamp);\n        if (!ts) continue;\n        const text = messageFromEntry(entry);\n        if (!text) continue;\n        const parsed = parseCoolingDuration(text);\n        if (parsed) {\n            coolingSeconds = parsed.seconds;\n        }\n    }\n    return {\n        coolingDurationSeconds: coolingSeconds\n    };\n}\nasync function fetchRoastAlarms(serial, startIso, endIso, endBoundary) {\n    const filter = `\nlogName=\"projects/bw-core/logs/roaster\"\nlabels.serial=\"${serial}\"\ntimestamp >= \"${startIso}\"\ntimestamp <= \"${endIso}\"\n(textPayload:\"ALARM\" OR textPayload:\"Alarm\" OR textPayload:\"ActiveAlarms\" OR jsonPayload.message:\"ALARM\" OR jsonPayload.message:\"Alarm\" OR jsonPayload.message:\"ActiveAlarms\")\n`.trim();\n    const [entries] = await _logging__WEBPACK_IMPORTED_MODULE_1__.logging.getEntries({\n        filter,\n        orderBy: \"timestamp asc\",\n        pageSize: 200\n    });\n    const alarms = new Set();\n    let seenActive = false;\n    for (const entry of entries){\n        if (seenActive) break;\n        const ts = normalizeTs(entry.timestamp || entry.metadata?.timestamp);\n        if (!ts) continue;\n        if (ts < startIso) continue;\n        if (ts > endIso) break;\n        const text = messageFromEntry(entry);\n        if (!text) continue;\n        // Skip empty ActiveAlarms sections\n        const isActiveSection = /ActiveAlarms/i.test(text);\n        if (/ActiveAlarms:\\s*\\[\\s*\\]/i.test(text)) {\n            if (isActiveSection && (endBoundary ? ts >= endBoundary : true)) {\n                seenActive = true;\n            }\n            continue;\n        }\n        const rawName = extractAlarmName(text);\n        const names = normalizeAlarmNames(rawName);\n        for (const n of names){\n            alarms.add(n);\n        }\n        const pastEnd = endBoundary ? ts >= endBoundary : true;\n        if (isActiveSection && pastEnd) {\n            seenActive = true;\n        }\n    }\n    return Array.from(alarms);\n}\nasync function getRoasts(serial, from, to, page, pageSize) {\n    const roastIds = await (0,_getRoastIds__WEBPACK_IMPORTED_MODULE_0__.getRoastIds)(serial, from, to);\n    // Collapse multiple log hits into a single roast row\n    const grouped = new Map();\n    for (const r of roastIds){\n        const existing = grouped.get(r.roastId) || {\n            id: r.roastId,\n            startTime: \"\",\n            endTime: \"\",\n            startRaw: \"\",\n            endRaw: \"\",\n            earliest: r.timestamp\n        };\n        // Earliest overall timestamp for fallback\n        if (r.timestamp < existing.earliest) {\n            existing.earliest = r.timestamp;\n        }\n        // Explicit start/end classification\n        if (r.eventType === \"start\") {\n            if (!existing.startTime || r.timestamp < existing.startTime) {\n                existing.startTime = r.timestamp;\n                existing.startRaw = r.raw;\n            }\n        }\n        if (r.eventType === \"end\") {\n            if (!existing.endTime || r.timestamp > existing.endTime) {\n                existing.endTime = r.timestamp;\n                existing.endRaw = r.raw;\n            }\n        }\n        // Fallback: if we never saw a start, use earliest as start so we at least show something\n        if (!existing.startTime) {\n            existing.startTime = existing.earliest;\n            existing.startRaw = existing.startRaw || r.raw;\n        }\n        grouped.set(r.roastId, existing);\n    }\n    const groupedList = Array.from(grouped.values()).sort((a, b)=>b.startTime.localeCompare(a.startTime));\n    const total = groupedList.length;\n    // Simple pagination over grouped roasts\n    const start = Math.max(0, (page - 1) * pageSize);\n    const end = start + pageSize;\n    const slice = groupedList.slice(start, end);\n    const roasts = await Promise.all(slice.map(async (r)=>{\n        const durationSeconds = r.startTime && r.endTime ? Math.max(0, (new Date(r.endTime).getTime() - new Date(r.startTime).getTime()) / 1000) : 0;\n        // Filter to this roaster's serial and exclude roastctl by pinning logName to roaster.\n        const query = encodeURIComponent(`labels.serial=\"${serial}\" logName=\"projects/bw-core/logs/roaster\"`);\n        const startWindow = from || r.startTime;\n        const computedEnd = r.endTime && r.endTime !== \"\" ? r.endTime : new Date(new Date(r.startTime).getTime() + 60 * 60 * 1000).toISOString();\n        const endWindow = to || computedEnd;\n        const startParam = startWindow ? `;startTime=${encodeURIComponent(startWindow)}` : \"\";\n        const endParam = endWindow ? `;endTime=${encodeURIComponent(endWindow)}` : \"\";\n        const cursorParam = r.startTime ? `;cursorTimestamp=${encodeURIComponent(r.startTime)}` : \"\";\n        // Fetch alarms in the roast window\n        let alarms = [];\n        try {\n            const alarmStart = r.startTime;\n            const alarmEnd = r.endTime && r.endTime !== \"\" ? addSeconds(r.endTime, 5) : addMinutes(r.startTime, 60);\n            alarms = await fetchRoastAlarms(serial, alarmStart, alarmEnd, r.endTime || undefined);\n        } catch (err) {\n            console.error(\"Error fetching alarms for\", r.id, err);\n        }\n        // Cooling info (search from roast end to a reasonable window)\n        let coolingDurationSeconds = null;\n        try {\n            const coolingStart = r.endTime && r.endTime !== \"\" ? r.endTime : r.startTime;\n            const coolingEndWindow = addMinutes(coolingStart, 120);\n            const cooling = await fetchCoolingInfo(serial, coolingStart, coolingEndWindow);\n            if (Number.isFinite(cooling.coolingDurationSeconds)) {\n                coolingDurationSeconds = cooling.coolingDurationSeconds;\n            }\n        } catch (err) {\n            console.error(\"Error fetching cooling for\", r.id, err);\n        }\n        return {\n            id: r.id,\n            startTime: r.startTime,\n            endTime: r.endTime && r.endTime !== r.startTime ? r.endTime : \"\",\n            durationSeconds,\n            hasAlarms: alarms.length > 0,\n            alarms,\n            coolingDurationSeconds: coolingDurationSeconds ?? null,\n            gcpLink: `https://console.cloud.google.com/logs/query;query=${query}${startParam}${endParam}${cursorParam}?project=bw-core`\n        };\n    }));\n    return {\n        page,\n        pageSize,\n        total,\n        roasts\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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azovL2J3LWxvZy12aWV3ZXItbmV4dC8uL2xpYi9nZXRSb2FzdHMudHM/Njc1YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvZ2V0Um9hc3RzLnRzXG5pbXBvcnQgeyBnZXRSb2FzdElkcyB9IGZyb20gXCIuL2dldFJvYXN0SWRzXCI7XG5pbXBvcnQgeyBsb2dnaW5nIH0gZnJvbSBcIi4vbG9nZ2luZ1wiO1xuXG5mdW5jdGlvbiBhZGRNaW51dGVzKGlzbzogc3RyaW5nLCBtaW51dGVzOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBkID0gbmV3IERhdGUoaXNvKTtcbiAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0VGltZSgpICsgbWludXRlcyAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gYWRkU2Vjb25kcyhpc286IHN0cmluZywgc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgZCA9IG5ldyBEYXRlKGlzbyk7XG4gIHJldHVybiBuZXcgRGF0ZShkLmdldFRpbWUoKSArIHNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiBtZXNzYWdlRnJvbUVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIWVudHJ5KSByZXR1cm4gXCJcIjtcbiAgaWYgKGVudHJ5LnRleHRQYXlsb2FkKSByZXR1cm4gU3RyaW5nKGVudHJ5LnRleHRQYXlsb2FkKTtcbiAgaWYgKGVudHJ5LmRhdGEpIHJldHVybiBTdHJpbmcoZW50cnkuZGF0YSk7XG4gIGNvbnN0IGpwID0gZW50cnkuanNvblBheWxvYWQ7XG4gIGlmIChqcCkge1xuICAgIGlmICh0eXBlb2YganAgPT09IFwic3RyaW5nXCIpIHJldHVybiBqcDtcbiAgICBpZiAodHlwZW9mIGpwLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIpIHJldHVybiBqcC5tZXNzYWdlO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoanApO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gaWdub3JlXG4gICAgfVxuICB9XG4gIHJldHVybiBcIlwiO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVUcyh0czogYW55KTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghdHMpIHJldHVybiBudWxsO1xuICBpZiAodHlwZW9mIHRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgZml4ZWQgPSB0cy5yZXBsYWNlKC9cXC4oXFxkezN9KVxcZCtaJC8sIFwiLiQxWlwiKTtcbiAgICBjb25zdCBkID0gbmV3IERhdGUoZml4ZWQpO1xuICAgIHJldHVybiBpc05hTihkLmdldFRpbWUoKSkgPyBudWxsIDogZC50b0lTT1N0cmluZygpO1xuICB9XG4gIGlmICh0cyBpbnN0YW5jZW9mIERhdGUpIHJldHVybiB0cy50b0lTT1N0cmluZygpO1xuICBpZiAodHlwZW9mIHRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcih0cy5zZWNvbmRzID8/IHRzLl9zZWNvbmRzID8/IHRzLnZhbHVlPy5zZWNvbmRzID8/IDApO1xuICAgIGNvbnN0IG5hbm9zID0gTnVtYmVyKHRzLm5hbm9zID8/IHRzLl9uYW5vcyA/PyB0cy52YWx1ZT8ubmFub3MgPz8gMCk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc2Vjb25kcykpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBuZXcgRGF0ZShzZWNvbmRzICogMTAwMCArIE1hdGguZmxvb3IobmFub3MgLyAxZTYpKS50b0lTT1N0cmluZygpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0QWxhcm1OYW1lKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAvLyBBY3RpdmVBbGFybXMgSlNPTiBhcnJheVxuICBjb25zdCBhY3RpdmVNYXRjaCA9IHRleHQubWF0Y2goL0FjdGl2ZUFsYXJtczpcXHMqKFxcW1teXFxdXStcXF0pL2kpO1xuICBpZiAoYWN0aXZlTWF0Y2ggJiYgYWN0aXZlTWF0Y2hbMV0pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXJyID0gSlNPTi5wYXJzZShhY3RpdmVNYXRjaFsxXSk7XG4gICAgICBjb25zdCBuYW1lczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgaWYgKGl0ZW0/Lk5hbWUpIG5hbWVzLnB1c2goU3RyaW5nKGl0ZW0uTmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWVzLmxlbmd0aCkgcmV0dXJuIG5hbWVzLmpvaW4oXCIsIFwiKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIGZhbGwgdGhyb3VnaFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFsYXJtTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9BTEFSTVs6XFxzLV0qKFteLDtcXG5cXHJdKykvaSk7XG4gIGlmIChhbGFybU1hdGNoICYmIGFsYXJtTWF0Y2hbMV0pIHtcbiAgICByZXR1cm4gYWxhcm1NYXRjaFsxXS50cmltKCk7XG4gIH1cblxuICBjb25zdCBuYW1lRmllbGRNYXRjaCA9IHRleHQubWF0Y2goL1wiTmFtZVwiXFxzKjpcXHMqXCIoW15cIl0rKVwiL2kpO1xuICBpZiAobmFtZUZpZWxkTWF0Y2ggJiYgbmFtZUZpZWxkTWF0Y2hbMV0pIHJldHVybiBuYW1lRmllbGRNYXRjaFsxXS50cmltKCk7XG5cbiAgY29uc3QgdGFnTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9UYWc9KFtBLVphLXowLTlfXFwtXSspLyk7XG4gIGlmICh0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXSkge1xuICAgIHJldHVybiB0YWdNYXRjaFsxXS50cmltKCk7XG4gIH1cblxuICBpZiAoL0FjdGl2ZUFsYXJtczpcXHMqXFxbXFxzKlxcXS9pLnRlc3QodGV4dCkpIHJldHVybiBudWxsO1xuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQWxhcm1OYW1lcyhyYXc6IHN0cmluZyB8IG51bGwpOiBzdHJpbmdbXSB7XG4gIGlmICghcmF3KSByZXR1cm4gW107XG4gIGNvbnN0IG1hdGNoZXMgPSByYXcubWF0Y2goL1tBLVphLXpdW0EtWmEtejAtOV8uLV17Mix9L2cpIHx8IFtdO1xuICBjb25zdCByZXNlcnZlZCA9IG5ldyBTZXQoW1xuICAgIFwiSU5GT1wiLFxuICAgIFwiQUxBUk1cIixcbiAgICBcIkFjdGl2ZUFsYXJtc1wiLFxuICAgIFwiVmVyYlwiLFxuICAgIFwiTGV2ZWxcIixcbiAgICBcIlNldmVyaXR5XCIsXG4gICAgXCJEQVRBXCIsXG4gICAgXCJzZXRcIixcbiAgICBcInNldFRhZ1wiLFxuICAgIFwiVGFnXCIsXG4gIF0pO1xuICBjb25zdCBuYW1lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBtIG9mIG1hdGNoZXMpIHtcbiAgICBpZiAocmVzZXJ2ZWQuaGFzKG0pKSBjb250aW51ZTtcbiAgICBpZiAoL154P1swLTlhLWZBLUZdKyQvLnRlc3QobSkpIGNvbnRpbnVlOyAvLyBoZXgtaXNoIGNvZGVzIGxpa2UgeDQwMVxuICAgIGlmICgvXnNldC9pLnRlc3QobSkpIGNvbnRpbnVlO1xuICAgIGlmIChtLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcInNcIikpIHtcbiAgICAgIC8vIHNraXAgc3RyYXkgbGVhZGluZyBzIC8gc19EQVRBIHRva2Vuc1xuICAgICAgaWYgKG0gPT09IFwic1wiIHx8IG0uc3RhcnRzV2l0aChcInNfREFUQVwiKSkgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gbm9ybWFsaXplIE1haW5fQmxvd2VyX1J1bnRpbWVGYWlsL01haW5CbG93ZXJSdW50aW1lX0ZhaWwgdmFyaWFudHMgdG8gYSBzaW5nbGUgdG9rZW5cbiAgICBjb25zdCBub3JtYWxpemVkID0gbS5yZXBsYWNlKC9SdW50aW1lX0ZhaWwvaSwgXCJSdW50aW1lRmFpbFwiKS5yZXBsYWNlKC9fL2csIFwiX1wiKTtcbiAgICBuYW1lcy5wdXNoKG5vcm1hbGl6ZWQpO1xuICB9XG4gIC8vIERlZHVwbGljYXRlIHdoaWxlIHByZXNlcnZpbmcgb3JkZXI7IHByZWZlciBjb2xsYXBzaW5nIGNhbWVsIHZzIHVuZGVyc2NvcmUgZHVwbGljYXRlc1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHVuaXF1ZTogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBuIG9mIG5hbWVzKSB7XG4gICAgY29uc3Qga2V5ID0gbi5yZXBsYWNlKC9fL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHNlZW4uaGFzKGtleSkpIGNvbnRpbnVlO1xuICAgIHNlZW4uYWRkKGtleSk7XG4gICAgdW5pcXVlLnB1c2gobik7XG4gIH1cbiAgcmV0dXJuIHVuaXF1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDb29saW5nRHVyYXRpb24odGV4dDogc3RyaW5nKTogeyBzZWNvbmRzOiBudW1iZXI7IGxhYmVsOiBzdHJpbmcgfSB8IG51bGwge1xuICAvLyBlLmcuLCBcIkxPRyBDb29sICwgMzoyMlwiIG9yIFwiQ29vbCAsIDM6MjJcIlxuICBjb25zdCBjb29sTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9Db29sXFxzKixcXHMqKFxcZCspOihcXGR7Mn0pL2kpO1xuICBpZiAoY29vbE1hdGNoKSB7XG4gICAgY29uc3QgbWludXRlcyA9IE51bWJlcihjb29sTWF0Y2hbMV0pO1xuICAgIGNvbnN0IHNlY29uZHMgPSBOdW1iZXIoY29vbE1hdGNoWzJdKTtcbiAgICBjb25zdCB0b3RhbCA9IG1pbnV0ZXMgKiA2MCArIHNlY29uZHM7XG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZSh0b3RhbCkpIHJldHVybiB7IHNlY29uZHM6IHRvdGFsLCBsYWJlbDogYCR7bWludXRlc306JHtjb29sTWF0Y2hbMl19YCB9O1xuICB9XG5cbiAgLy8gZS5nLiwgXCJCZWFuIENvb2xlciByZWFjaGVkIC4uLiBhdCAzOjIzLCBtOnNcIlxuICBjb25zdCByZWFjaGVkTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9yZWFjaGVkW14wLTldKihbMC05XSspOihbMC05XXsyfSkvaSk7XG4gIGlmIChyZWFjaGVkTWF0Y2gpIHtcbiAgICBjb25zdCBtaW51dGVzID0gTnVtYmVyKHJlYWNoZWRNYXRjaFsxXSk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihyZWFjaGVkTWF0Y2hbMl0pO1xuICAgIGNvbnN0IHRvdGFsID0gbWludXRlcyAqIDYwICsgc2Vjb25kcztcbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHRvdGFsKSkgcmV0dXJuIHsgc2Vjb25kczogdG90YWwsIGxhYmVsOiBgJHttaW51dGVzfToke3JlYWNoZWRNYXRjaFsyXX1gIH07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hDb29saW5nSW5mbyhcbiAgc2VyaWFsOiBzdHJpbmcsXG4gIHN0YXJ0SXNvOiBzdHJpbmcsXG4gIGVuZElzbzogc3RyaW5nXG4pIHtcbiAgY29uc3QgZmlsdGVyID0gYFxubG9nTmFtZT1cInByb2plY3RzL2J3LWNvcmUvbG9ncy9yb2FzdGVyXCJcbmxhYmVscy5zZXJpYWw9XCIke3NlcmlhbH1cIlxudGltZXN0YW1wID49IFwiJHtzdGFydElzb31cIlxudGltZXN0YW1wIDw9IFwiJHtlbmRJc299XCJcbih0ZXh0UGF5bG9hZDpcIkNvb2xcIiBPUiB0ZXh0UGF5bG9hZDpcIkNPT0xcIiBPUiB0ZXh0UGF5bG9hZDpcIkJlYW4gQ29vbGVyIHJlYWNoZWRcIiBPUiBqc29uUGF5bG9hZC5tZXNzYWdlOlwiQ29vbFwiIE9SIGpzb25QYXlsb2FkLm1lc3NhZ2U6XCJDT09MXCIgT1IganNvblBheWxvYWQubWVzc2FnZTpcIkJlYW4gQ29vbGVyIHJlYWNoZWRcIilcbmAudHJpbSgpO1xuXG4gIGNvbnN0IFtlbnRyaWVzXSA9IGF3YWl0IGxvZ2dpbmcuZ2V0RW50cmllcyh7XG4gICAgZmlsdGVyLFxuICAgIG9yZGVyQnk6IFwidGltZXN0YW1wIGFzY1wiLFxuICAgIHBhZ2VTaXplOiAxMjAwLFxuICB9KTtcblxuICBsZXQgY29vbGluZ1NlY29uZHM6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgIGNvbnN0IHRzID0gbm9ybWFsaXplVHMoKGVudHJ5IGFzIGFueSkudGltZXN0YW1wIHx8IChlbnRyeSBhcyBhbnkpLm1ldGFkYXRhPy50aW1lc3RhbXApO1xuICAgIGlmICghdHMpIGNvbnRpbnVlO1xuICAgIGNvbnN0IHRleHQgPSBtZXNzYWdlRnJvbUVudHJ5KGVudHJ5KTtcbiAgICBpZiAoIXRleHQpIGNvbnRpbnVlO1xuXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VDb29saW5nRHVyYXRpb24odGV4dCk7XG4gICAgaWYgKHBhcnNlZCkge1xuICAgICAgY29vbGluZ1NlY29uZHMgPSBwYXJzZWQuc2Vjb25kcztcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvb2xpbmdEdXJhdGlvblNlY29uZHM6IGNvb2xpbmdTZWNvbmRzLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaFJvYXN0QWxhcm1zKFxuICBzZXJpYWw6IHN0cmluZyxcbiAgc3RhcnRJc286IHN0cmluZyxcbiAgZW5kSXNvOiBzdHJpbmcsXG4gIGVuZEJvdW5kYXJ5Pzogc3RyaW5nXG4pIHtcbiAgY29uc3QgZmlsdGVyID0gYFxubG9nTmFtZT1cInByb2plY3RzL2J3LWNvcmUvbG9ncy9yb2FzdGVyXCJcbmxhYmVscy5zZXJpYWw9XCIke3NlcmlhbH1cIlxudGltZXN0YW1wID49IFwiJHtzdGFydElzb31cIlxudGltZXN0YW1wIDw9IFwiJHtlbmRJc299XCJcbih0ZXh0UGF5bG9hZDpcIkFMQVJNXCIgT1IgdGV4dFBheWxvYWQ6XCJBbGFybVwiIE9SIHRleHRQYXlsb2FkOlwiQWN0aXZlQWxhcm1zXCIgT1IganNvblBheWxvYWQubWVzc2FnZTpcIkFMQVJNXCIgT1IganNvblBheWxvYWQubWVzc2FnZTpcIkFsYXJtXCIgT1IganNvblBheWxvYWQubWVzc2FnZTpcIkFjdGl2ZUFsYXJtc1wiKVxuYC50cmltKCk7XG5cbiAgY29uc3QgW2VudHJpZXNdID0gYXdhaXQgbG9nZ2luZy5nZXRFbnRyaWVzKHtcbiAgICBmaWx0ZXIsXG4gICAgb3JkZXJCeTogXCJ0aW1lc3RhbXAgYXNjXCIsXG4gICAgcGFnZVNpemU6IDIwMCxcbiAgfSk7XG5cbiAgY29uc3QgYWxhcm1zID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGxldCBzZWVuQWN0aXZlID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKHNlZW5BY3RpdmUpIGJyZWFrO1xuXG4gICAgY29uc3QgdHMgPSBub3JtYWxpemVUcygoZW50cnkgYXMgYW55KS50aW1lc3RhbXAgfHwgKGVudHJ5IGFzIGFueSkubWV0YWRhdGE/LnRpbWVzdGFtcCk7XG4gICAgaWYgKCF0cykgY29udGludWU7XG4gICAgaWYgKHRzIDwgc3RhcnRJc28pIGNvbnRpbnVlO1xuICAgIGlmICh0cyA+IGVuZElzbykgYnJlYWs7XG5cbiAgICBjb25zdCB0ZXh0ID0gbWVzc2FnZUZyb21FbnRyeShlbnRyeSk7XG4gICAgaWYgKCF0ZXh0KSBjb250aW51ZTtcblxuICAgIC8vIFNraXAgZW1wdHkgQWN0aXZlQWxhcm1zIHNlY3Rpb25zXG4gICAgY29uc3QgaXNBY3RpdmVTZWN0aW9uID0gL0FjdGl2ZUFsYXJtcy9pLnRlc3QodGV4dCk7XG4gICAgaWYgKC9BY3RpdmVBbGFybXM6XFxzKlxcW1xccypcXF0vaS50ZXN0KHRleHQpKSB7XG4gICAgICBpZiAoaXNBY3RpdmVTZWN0aW9uICYmIChlbmRCb3VuZGFyeSA/IHRzID49IGVuZEJvdW5kYXJ5IDogdHJ1ZSkpIHtcbiAgICAgICAgc2VlbkFjdGl2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCByYXdOYW1lID0gZXh0cmFjdEFsYXJtTmFtZSh0ZXh0KTtcbiAgICBjb25zdCBuYW1lcyA9IG5vcm1hbGl6ZUFsYXJtTmFtZXMocmF3TmFtZSk7XG4gICAgZm9yIChjb25zdCBuIG9mIG5hbWVzKSB7XG4gICAgICBhbGFybXMuYWRkKG4pO1xuICAgIH1cblxuICAgIGNvbnN0IHBhc3RFbmQgPSBlbmRCb3VuZGFyeSA/IHRzID49IGVuZEJvdW5kYXJ5IDogdHJ1ZTtcbiAgICBpZiAoaXNBY3RpdmVTZWN0aW9uICYmIHBhc3RFbmQpIHtcbiAgICAgIHNlZW5BY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBBcnJheS5mcm9tKGFsYXJtcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSb2FzdHMoXG4gIHNlcmlhbDogc3RyaW5nLFxuICBmcm9tOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIHRvOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIHBhZ2U6IG51bWJlcixcbiAgcGFnZVNpemU6IG51bWJlclxuKSB7XG4gIGNvbnN0IHJvYXN0SWRzID0gYXdhaXQgZ2V0Um9hc3RJZHMoc2VyaWFsLCBmcm9tLCB0byk7XG4gIC8vIENvbGxhcHNlIG11bHRpcGxlIGxvZyBoaXRzIGludG8gYSBzaW5nbGUgcm9hc3Qgcm93XG4gIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPFxuICAgIHN0cmluZyxcbiAgICB7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgc3RhcnRUaW1lOiBzdHJpbmc7XG4gICAgICBlbmRUaW1lOiBzdHJpbmc7XG4gICAgICBzdGFydFJhdzogc3RyaW5nO1xuICAgICAgZW5kUmF3OiBzdHJpbmc7XG4gICAgICBlYXJsaWVzdDogc3RyaW5nO1xuICAgIH1cbiAgPigpO1xuXG4gIGZvciAoY29uc3QgciBvZiByb2FzdElkcykge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gZ3JvdXBlZC5nZXQoci5yb2FzdElkKSB8fCB7XG4gICAgICBpZDogci5yb2FzdElkLFxuICAgICAgc3RhcnRUaW1lOiBcIlwiLFxuICAgICAgZW5kVGltZTogXCJcIixcbiAgICAgIHN0YXJ0UmF3OiBcIlwiLFxuICAgICAgZW5kUmF3OiBcIlwiLFxuICAgICAgZWFybGllc3Q6IHIudGltZXN0YW1wLFxuICAgIH07XG5cbiAgICAvLyBFYXJsaWVzdCBvdmVyYWxsIHRpbWVzdGFtcCBmb3IgZmFsbGJhY2tcbiAgICBpZiAoci50aW1lc3RhbXAgPCBleGlzdGluZy5lYXJsaWVzdCkge1xuICAgICAgZXhpc3RpbmcuZWFybGllc3QgPSByLnRpbWVzdGFtcDtcbiAgICB9XG5cbiAgICAvLyBFeHBsaWNpdCBzdGFydC9lbmQgY2xhc3NpZmljYXRpb25cbiAgICBpZiAoci5ldmVudFR5cGUgPT09IFwic3RhcnRcIikge1xuICAgICAgaWYgKCFleGlzdGluZy5zdGFydFRpbWUgfHwgci50aW1lc3RhbXAgPCBleGlzdGluZy5zdGFydFRpbWUpIHtcbiAgICAgICAgZXhpc3Rpbmcuc3RhcnRUaW1lID0gci50aW1lc3RhbXA7XG4gICAgICAgIGV4aXN0aW5nLnN0YXJ0UmF3ID0gci5yYXc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHIuZXZlbnRUeXBlID09PSBcImVuZFwiKSB7XG4gICAgICBpZiAoIWV4aXN0aW5nLmVuZFRpbWUgfHwgci50aW1lc3RhbXAgPiBleGlzdGluZy5lbmRUaW1lKSB7XG4gICAgICAgIGV4aXN0aW5nLmVuZFRpbWUgPSByLnRpbWVzdGFtcDtcbiAgICAgICAgZXhpc3RpbmcuZW5kUmF3ID0gci5yYXc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2s6IGlmIHdlIG5ldmVyIHNhdyBhIHN0YXJ0LCB1c2UgZWFybGllc3QgYXMgc3RhcnQgc28gd2UgYXQgbGVhc3Qgc2hvdyBzb21ldGhpbmdcbiAgICBpZiAoIWV4aXN0aW5nLnN0YXJ0VGltZSkge1xuICAgICAgZXhpc3Rpbmcuc3RhcnRUaW1lID0gZXhpc3RpbmcuZWFybGllc3Q7XG4gICAgICBleGlzdGluZy5zdGFydFJhdyA9IGV4aXN0aW5nLnN0YXJ0UmF3IHx8IHIucmF3O1xuICAgIH1cblxuICAgIGdyb3VwZWQuc2V0KHIucm9hc3RJZCwgZXhpc3RpbmcpO1xuICB9XG5cbiAgY29uc3QgZ3JvdXBlZExpc3QgPSBBcnJheS5mcm9tKGdyb3VwZWQudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+XG4gICAgYi5zdGFydFRpbWUubG9jYWxlQ29tcGFyZShhLnN0YXJ0VGltZSlcbiAgKTtcblxuICBjb25zdCB0b3RhbCA9IGdyb3VwZWRMaXN0Lmxlbmd0aDtcblxuICAvLyBTaW1wbGUgcGFnaW5hdGlvbiBvdmVyIGdyb3VwZWQgcm9hc3RzXG4gIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgKHBhZ2UgLSAxKSAqIHBhZ2VTaXplKTtcbiAgY29uc3QgZW5kID0gc3RhcnQgKyBwYWdlU2l6ZTtcbiAgY29uc3Qgc2xpY2UgPSBncm91cGVkTGlzdC5zbGljZShzdGFydCwgZW5kKTtcblxuICBjb25zdCByb2FzdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICBzbGljZS5tYXAoYXN5bmMgciA9PiB7XG4gICAgICBjb25zdCBkdXJhdGlvblNlY29uZHMgPSByLnN0YXJ0VGltZSAmJiByLmVuZFRpbWVcbiAgICAgICAgPyBNYXRoLm1heCgwLCAobmV3IERhdGUoci5lbmRUaW1lKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShyLnN0YXJ0VGltZSkuZ2V0VGltZSgpKSAvIDEwMDApXG4gICAgICAgIDogMDtcblxuICAgICAgLy8gRmlsdGVyIHRvIHRoaXMgcm9hc3RlcidzIHNlcmlhbCBhbmQgZXhjbHVkZSByb2FzdGN0bCBieSBwaW5uaW5nIGxvZ05hbWUgdG8gcm9hc3Rlci5cbiAgICAgIGNvbnN0IHF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICBgbGFiZWxzLnNlcmlhbD1cIiR7c2VyaWFsfVwiIGxvZ05hbWU9XCJwcm9qZWN0cy9idy1jb3JlL2xvZ3Mvcm9hc3RlclwiYFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHN0YXJ0V2luZG93ID0gZnJvbSB8fCByLnN0YXJ0VGltZTtcbiAgICAgIGNvbnN0IGNvbXB1dGVkRW5kID0gci5lbmRUaW1lICYmIHIuZW5kVGltZSAhPT0gXCJcIiA/IHIuZW5kVGltZSA6IG5ldyBEYXRlKG5ldyBEYXRlKHIuc3RhcnRUaW1lKS5nZXRUaW1lKCkgKyA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGVuZFdpbmRvdyA9IHRvIHx8IGNvbXB1dGVkRW5kO1xuXG4gICAgICBjb25zdCBzdGFydFBhcmFtID0gc3RhcnRXaW5kb3cgPyBgO3N0YXJ0VGltZT0ke2VuY29kZVVSSUNvbXBvbmVudChzdGFydFdpbmRvdyl9YCA6IFwiXCI7XG4gICAgICBjb25zdCBlbmRQYXJhbSA9IGVuZFdpbmRvdyA/IGA7ZW5kVGltZT0ke2VuY29kZVVSSUNvbXBvbmVudChlbmRXaW5kb3cpfWAgOiBcIlwiO1xuICAgICAgY29uc3QgY3Vyc29yUGFyYW0gPSByLnN0YXJ0VGltZSA/IGA7Y3Vyc29yVGltZXN0YW1wPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHIuc3RhcnRUaW1lKX1gIDogXCJcIjtcblxuICAgICAgLy8gRmV0Y2ggYWxhcm1zIGluIHRoZSByb2FzdCB3aW5kb3dcbiAgICAgIGxldCBhbGFybXM6IHN0cmluZ1tdID0gW107XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhbGFybVN0YXJ0ID0gci5zdGFydFRpbWU7XG4gICAgICAgIGNvbnN0IGFsYXJtRW5kID0gci5lbmRUaW1lICYmIHIuZW5kVGltZSAhPT0gXCJcIlxuICAgICAgICAgID8gYWRkU2Vjb25kcyhyLmVuZFRpbWUsIDUpXG4gICAgICAgICAgOiBhZGRNaW51dGVzKHIuc3RhcnRUaW1lLCA2MCk7XG4gICAgICAgIGFsYXJtcyA9IGF3YWl0IGZldGNoUm9hc3RBbGFybXMoc2VyaWFsLCBhbGFybVN0YXJ0LCBhbGFybUVuZCwgci5lbmRUaW1lIHx8IHVuZGVmaW5lZCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGFsYXJtcyBmb3JcIiwgci5pZCwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29vbGluZyBpbmZvIChzZWFyY2ggZnJvbSByb2FzdCBlbmQgdG8gYSByZWFzb25hYmxlIHdpbmRvdylcbiAgICAgIGxldCBjb29saW5nRHVyYXRpb25TZWNvbmRzOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvb2xpbmdTdGFydCA9IHIuZW5kVGltZSAmJiByLmVuZFRpbWUgIT09IFwiXCIgPyByLmVuZFRpbWUgOiByLnN0YXJ0VGltZTtcbiAgICAgICAgY29uc3QgY29vbGluZ0VuZFdpbmRvdyA9IGFkZE1pbnV0ZXMoY29vbGluZ1N0YXJ0LCAxMjApO1xuICAgICAgICBjb25zdCBjb29saW5nID0gYXdhaXQgZmV0Y2hDb29saW5nSW5mbyhzZXJpYWwsIGNvb2xpbmdTdGFydCwgY29vbGluZ0VuZFdpbmRvdyk7XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoY29vbGluZy5jb29saW5nRHVyYXRpb25TZWNvbmRzIGFzIG51bWJlcikpIHtcbiAgICAgICAgICBjb29saW5nRHVyYXRpb25TZWNvbmRzID0gY29vbGluZy5jb29saW5nRHVyYXRpb25TZWNvbmRzIGFzIG51bWJlcjtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjb29saW5nIGZvclwiLCByLmlkLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogci5pZCxcbiAgICAgICAgc3RhcnRUaW1lOiByLnN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZTogci5lbmRUaW1lICYmIHIuZW5kVGltZSAhPT0gci5zdGFydFRpbWUgPyByLmVuZFRpbWUgOiBcIlwiLFxuICAgICAgICBkdXJhdGlvblNlY29uZHMsXG4gICAgICAgIGhhc0FsYXJtczogYWxhcm1zLmxlbmd0aCA+IDAsXG4gICAgICAgIGFsYXJtcyxcbiAgICAgICAgY29vbGluZ0R1cmF0aW9uU2Vjb25kczogY29vbGluZ0R1cmF0aW9uU2Vjb25kcyA/PyBudWxsLFxuICAgICAgICBnY3BMaW5rOiBgaHR0cHM6Ly9jb25zb2xlLmNsb3VkLmdvb2dsZS5jb20vbG9ncy9xdWVyeTtxdWVyeT0ke3F1ZXJ5fSR7c3RhcnRQYXJhbX0ke2VuZFBhcmFtfSR7Y3Vyc29yUGFyYW19P3Byb2plY3Q9YnctY29yZWAsXG4gICAgICB9O1xuICAgIH0pXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBwYWdlLFxuICAgIHBhZ2VTaXplLFxuICAgIHRvdGFsLFxuICAgIHJvYXN0cyxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRSb2FzdElkcyIsImxvZ2dpbmciLCJhZGRNaW51dGVzIiwiaXNvIiwibWludXRlcyIsImQiLCJEYXRlIiwiZ2V0VGltZSIsInRvSVNPU3RyaW5nIiwiYWRkU2Vjb25kcyIsInNlY29uZHMiLCJtZXNzYWdlRnJvbUVudHJ5IiwiZW50cnkiLCJ0ZXh0UGF5bG9hZCIsIlN0cmluZyIsImRhdGEiLCJqcCIsImpzb25QYXlsb2FkIiwibWVzc2FnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJub3JtYWxpemVUcyIsInRzIiwiZml4ZWQiLCJyZXBsYWNlIiwiaXNOYU4iLCJOdW1iZXIiLCJfc2Vjb25kcyIsInZhbHVlIiwibmFub3MiLCJfbmFub3MiLCJpc0Zpbml0ZSIsIk1hdGgiLCJmbG9vciIsImV4dHJhY3RBbGFybU5hbWUiLCJ0ZXh0IiwiYWN0aXZlTWF0Y2giLCJtYXRjaCIsImFyciIsInBhcnNlIiwibmFtZXMiLCJpdGVtIiwiTmFtZSIsInB1c2giLCJsZW5ndGgiLCJqb2luIiwiYWxhcm1NYXRjaCIsInRyaW0iLCJuYW1lRmllbGRNYXRjaCIsInRhZ01hdGNoIiwidGVzdCIsIm5vcm1hbGl6ZUFsYXJtTmFtZXMiLCJyYXciLCJtYXRjaGVzIiwicmVzZXJ2ZWQiLCJTZXQiLCJtIiwiaGFzIiwidG9Mb3dlckNhc2UiLCJzdGFydHNXaXRoIiwibm9ybWFsaXplZCIsInNlZW4iLCJ1bmlxdWUiLCJuIiwia2V5IiwiYWRkIiwicGFyc2VDb29saW5nRHVyYXRpb24iLCJjb29sTWF0Y2giLCJ0b3RhbCIsImxhYmVsIiwicmVhY2hlZE1hdGNoIiwiZmV0Y2hDb29saW5nSW5mbyIsInNlcmlhbCIsInN0YXJ0SXNvIiwiZW5kSXNvIiwiZmlsdGVyIiwiZW50cmllcyIsImdldEVudHJpZXMiLCJvcmRlckJ5IiwicGFnZVNpemUiLCJjb29saW5nU2Vjb25kcyIsInRpbWVzdGFtcCIsIm1ldGFkYXRhIiwicGFyc2VkIiwiY29vbGluZ0R1cmF0aW9uU2Vjb25kcyIsImZldGNoUm9hc3RBbGFybXMiLCJlbmRCb3VuZGFyeSIsImFsYXJtcyIsInNlZW5BY3RpdmUiLCJpc0FjdGl2ZVNlY3Rpb24iLCJyYXdOYW1lIiwicGFzdEVuZCIsIkFycmF5IiwiZnJvbSIsImdldFJvYXN0cyIsInRvIiwicGFnZSIsInJvYXN0SWRzIiwiZ3JvdXBlZCIsIk1hcCIsInIiLCJleGlzdGluZyIsImdldCIsInJvYXN0SWQiLCJpZCIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJzdGFydFJhdyIsImVuZFJhdyIsImVhcmxpZXN0IiwiZXZlbnRUeXBlIiwic2V0IiwiZ3JvdXBlZExpc3QiLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwic3RhcnQiLCJtYXgiLCJlbmQiLCJzbGljZSIsInJvYXN0cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJkdXJhdGlvblNlY29uZHMiLCJxdWVyeSIsImVuY29kZVVSSUNvbXBvbmVudCIsInN0YXJ0V2luZG93IiwiY29tcHV0ZWRFbmQiLCJlbmRXaW5kb3ciLCJzdGFydFBhcmFtIiwiZW5kUGFyYW0iLCJjdXJzb3JQYXJhbSIsImFsYXJtU3RhcnQiLCJhbGFybUVuZCIsInVuZGVmaW5lZCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImNvb2xpbmdTdGFydCIsImNvb2xpbmdFbmRXaW5kb3ciLCJjb29saW5nIiwiaGFzQWxhcm1zIiwiZ2NwTGluayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/getRoasts.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logging.ts":
/*!************************!*\
  !*** ./lib/logging.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logging: () => (/* binding */ logging),\n/* harmony export */   projectId: () => (/* binding */ projectId)\n/* harmony export */ });\n/* harmony import */ var _google_cloud_logging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google-cloud/logging */ \"(rsc)/./node_modules/@google-cloud/logging/build/src/index.js\");\n/* harmony import */ var _google_cloud_logging__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_google_cloud_logging__WEBPACK_IMPORTED_MODULE_0__);\n// lib/logging.ts\n\nconst projectId = process.env.GOOGLE_PROJECT_ID || process.env.GCLOUD_PROJECT || \"bw-core\";\nconst logging = new _google_cloud_logging__WEBPACK_IMPORTED_MODULE_0__.Logging({\n    projectId\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbG9nZ2luZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsaUJBQWlCO0FBQytCO0FBRXpDLE1BQU1DLFlBQ1hDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCLElBQzdCRixRQUFRQyxHQUFHLENBQUNFLGNBQWMsSUFDMUIsVUFBVTtBQUVMLE1BQU1DLFVBQVUsSUFBSU4sMERBQU9BLENBQUM7SUFBRUM7QUFBVSxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYnctbG9nLXZpZXdlci1uZXh0Ly4vbGliL2xvZ2dpbmcudHM/MDQxMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvbG9nZ2luZy50c1xuaW1wb3J0IHsgTG9nZ2luZyB9IGZyb20gXCJAZ29vZ2xlLWNsb3VkL2xvZ2dpbmdcIjtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RJZCA9XG4gIHByb2Nlc3MuZW52LkdPT0dMRV9QUk9KRUNUX0lEIHx8XG4gIHByb2Nlc3MuZW52LkdDTE9VRF9QUk9KRUNUIHx8XG4gIFwiYnctY29yZVwiO1xuXG5leHBvcnQgY29uc3QgbG9nZ2luZyA9IG5ldyBMb2dnaW5nKHsgcHJvamVjdElkIH0pO1xuIl0sIm5hbWVzIjpbIkxvZ2dpbmciLCJwcm9qZWN0SWQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX1BST0pFQ1RfSUQiLCJHQ0xPVURfUFJPSkVDVCIsImxvZ2dpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/logging.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@grpc","vendor-chunks/google-gax","vendor-chunks/protobufjs","vendor-chunks/google-auth-library","vendor-chunks/@google-cloud","vendor-chunks/uuid","vendor-chunks/eventid","vendor-chunks/readable-stream","vendor-chunks/proto3-json-serializer","vendor-chunks/@protobufjs","vendor-chunks/teeny-request","vendor-chunks/gaxios","vendor-chunks/whatwg-url","vendor-chunks/jws","vendor-chunks/html-entities","vendor-chunks/http-proxy-agent","vendor-chunks/debug","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/tr46","vendor-chunks/inherits","vendor-chunks/https-proxy-agent","vendor-chunks/gcp-metadata","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/agent-base","vendor-chunks/node-fetch","vendor-chunks/long","vendor-chunks/wrappy","vendor-chunks/webidl-conversions","vendor-chunks/util-deprecate","vendor-chunks/supports-color","vendor-chunks/stubs","vendor-chunks/string_decoder","vendor-chunks/stream-shift","vendor-chunks/stream-events","vendor-chunks/safe-buffer","vendor-chunks/retry-request","vendor-chunks/pumpify","vendor-chunks/pump","vendor-chunks/once","vendor-chunks/on-finished","vendor-chunks/object-hash","vendor-chunks/ms","vendor-chunks/lodash.camelcase","vendor-chunks/jwa","vendor-chunks/is-stream","vendor-chunks/is-obj","vendor-chunks/has-flag","vendor-chunks/gtoken","vendor-chunks/extend","vendor-chunks/event-target-shim","vendor-chunks/end-of-stream","vendor-chunks/ee-first","vendor-chunks/duplexify","vendor-chunks/dot-prop","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js","vendor-chunks/arrify","vendor-chunks/abort-controller","vendor-chunks/@tootallnate","vendor-chunks/@js-sdsl"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froasts%2Froute&page=%2Fapi%2Froasts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froasts%2Froute.ts&appDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgobi%2FDownloads%2Fbw-log-viewer-next&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();